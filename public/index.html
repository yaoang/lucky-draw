<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" charset="UTF-8">
    <title>Awesome Lucky Draw Version 2.0</title>
    <link rel="stylesheet" href="style.css">
    <script src="index.js"></script>
</head>

<body>
    <div class="main-container">
        <div class="record-cover">
            <div class="title">
                2023 T&D<br />
                New Year Luck Draw
            </div>
            <div class="desc">2023 Transation and ditital new year luck draw</div>
            <div class="button">
                <button onmouseenter="hover(this)" onmouseout="out(this)" onclick="start(this)">
                    Start Random
                </button>
            </div>
            <div class="name-list">
                <!-- <div class="item">
                    Ang Yao
                </div> -->
                <!-- <div class="item">
                    Dish Smith
                </div>
                <div class="item">
                    Tomas Bevid
                </div> -->
            </div>
            <div class="my-record">
                <div class="record-package">
                    <img src="./images/package.png" alt="record package">
                </div>
                <div class="record">
                    <img src="./images/record.png" alt="record">
                </div>
            </div>
        </div>

    </div>
</body>
<script>
    function hover() {
        const img = document.getElementsByClassName('record')[0]
        img.classList.remove('record')
        img.classList.add('record2')

        img.classList.remove('push')
        img.classList.add('pull')
    }

    function out(obj) {
        const img = document.getElementsByClassName('record2')[0]
        img.classList.remove('pull')
        img.classList.add('push')

        img.classList.remove('record2')
        img.classList.add('record')
    }

    function addItem(nameList, name, ignoreClass) {
        const item = document.createElement('div')
        if(!ignoreClass) {
            item.classList.add('item')
        }
        item.innerText = name
        nameList.appendChild(item)
    }

    function getOne(nameList, name) {
        return new Promise(resolve => {
            setTimeout(() => {
                addItem(nameList, name)
                resolve(name)
            }, 100)
        })
    }

    async function start(obj) {
        obj.setAttribute('disabled', '')
        const animationDeplay = 1000
        const nameList = document.getElementsByClassName('name-list')[0]
        nameList.innerHTML = ''
        const names = ['Ang Yao1', 'Dish Smith2', 'Tomas Bevid3', 'Ang Yao4', 'Dish Smith5', 'Tomas Bevid6', 'Ang Yao7', 'Dish Smith8', 'Tomas Bevid9', 'Ang Yao10', 'Dish Smith11', 'Tomas Bevid12']
        const length = names.length
        const rnd = Math.floor(Math.random() * names.length)
        console.log('lng=', length, ', rnd=', rnd)
        let index = 0
        for (let index = 0; index < length; index++) {
            if (rnd === index) {
                continue
            }
            const name = names[index]
            await getOne(nameList, name)
        }
        const name = names[rnd]
        await getOne(nameList, name, rnd)

        setTimeout(() => {
            addItem(nameList, name, true)
        }, 700)
        obj.removeAttribute('disabled')
    }
</script>

</html>